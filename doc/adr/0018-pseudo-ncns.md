# 17. pseudo NCNs

Date: 2024-03-20

## Status

Accepted

## Context

Many judgments in the body of UK case law do not have Neutral Citation Numbers (NCNs). These include:

- Judgments that predate the issuance of NCNs, potentially going back centuries.

- Judgments from lower courts that do not issue NCNs.

- Judgments intentionally not given an NCN, because they’re not intended to be cited.

- Judgments that are parsed incorrectly, and have either an incorrect or missing NCN.

The Find Case Law service needs to be able to include these judgments, and therefore fit them into our URL scheme, which is based on the structure of the NCN (see [ADR 4, “Adopt a standardised URL scheme”](https://github.com/nationalarchives/ds-find-caselaw-docs/blob/main/doc/adr/0004-adopt-a-standardised-url-scheme.md)).

Therefore, we need to give these judgments our own identifier with which to identify them, and generate URLs.

ADR #4 includes URLs for TNA ordinal numbers, though does not define exactly what they are.

An estimated [3.5 million cases](https://commonslibrary.parliament.uk/research-briefings/cbp-8372/) entered courts and tribunals in 2021 in our jurisdiction. We don’t need to allocate identifiers to all of these, but our scheme should take this into account. It’s possible that this will increase significantly in the future, with novel legal approaches such as AI litigation, etc, so we should give ourselves some room for expansion.

## Decision

As well as any true NCN they may come with, we will issue all judgments a pseudo-NCN in the following format:

`[{year}] {court code} {namespace}.{id}`

As with a true NCN, the year and court code come first, but the ordinal number is replaced with a combination of a namespace followed by a unique alphabetical ID.

The court code and year are optional; in cases where we do not know either of these, the bare `{namespace}.{id}` can be used on its own; it is completely unique, not unique per year or court as with normal NCN ordinals.

If the judgment does not come with a pre-issued NCN, we will consider our pseudo-NCN to be the canonical identifier for the purposes of database storage, etc.

## Namespace

We will use the namespace `fcl` for identifiers that we issue.

## ID

The ID part will be generated by taking the first 48 bits (12 hex digits) of a document’s content hash and converting it to a [Sqid](https://sqids.org/), using a 20-character custom alphabet made up of the lowercase letters of the basic ASCII alphabet, without the vowels “aeiou” and ”y” (in order to avoid real words appearing in the ids). The generated sqid should have a minimum length of 8 characters (which can be enforced with the sqids library), but may expand to longer IDs as required (for instance, the maximum value for a 48-bit number would be 13 characters long when encoded).

If a generated Sqid is not unique, more of the content hash can be used to generate an alternative (which will be longer).

For readability, the id part may be split up with periods if desired; periods should be discarded before storage or lookup, and do not form a canonical part of the id.

The format of the namespace and ID is chosen specifically for compatibility with ECLI, which allows "ordinal” numbers which are alphanumeric and can contain dots.

## Examples

`[1932] UKHL fcl.mqbqm.kzkkt`

Or, in ECLI form:

`ECLI:UK:UKHL:1932:fcl.mqbqm.kzkkt`

## URIs

ADR #4 defines URLs for TNA-issued ordinal numbers. This ADR amends that scheme to make court, year and date optional, and replace the `num` part of the URL with the namespace component defined above. Judgments identified by Pseudo-NCNs will therefore have work URIs of the following form:

`https://caselaw.nationalarchives.gov.uk/id/[{court}/[{sub-division}/]][{year}/[{judgment-date}/]]{namespace}/{id}`

For example:

`https://caselaw.nationalarchives.gov.uk/id/UKHL/1932/fcl/mqbqm.kzkkt`

Expression and manifestation URIs follow suit, in the same equivalent patterns defined in ADR #4. For example:

`https://caselaw.nationalarchives.gov.uk/UKHL/1932/fcl/mqbqm.kzkkt`

`https://caselaw.nationalarchives.gov.uk/UKHL/1932/fcl/mqbqm.kzkkt/data.xml`

If the court and year are unknown, the expression URL would have the namespace at the root:

`https://caselaw.nationalarchives.gov.uk/fcl/mqbqm.kzkkt`

## Consequences

This scheme does not produce ordered numbers for cases. However, we are not expecting to be able to ingest judgments in a known order, so we cannot know the ordering of cases without extensive human research. Therefore we have chosen this scheme that allows for automatic ingestion without human intervention. However, we should allow alternative identifiers to be stored in the database and used in URLs, so that friendlier identifiers can be added later by hand.

A true NCN can be considered a pseudo-NCN with an empty namespace (and therefore no dot), and where the ids are monotonically-increasing ordinal decimal integers rather than sqids.

To represent BAILII -issued NCNs as an alternative (e.g. for search purposes), we should scope it into a bailii namespace; for example `[1932] UKHL bailii.100`.

We may want to change the identifier that we consider canonical; for instance, we may initially only have a pseudo-NCN that we issue, but an NCN may be minted later on. Or, we may receive a judgment that has an NCN that wasn’t picked up during parsing. Within the editorial UI, we will need to design and build a way of selecting the canonical identifier from the list of available identifiers, and make sure that non-canonical URIs redirect to the canonical one, even when that changes.

## Tasks

- [ ] Catherine/Jim/John/Nicki: decide on namespace prefix

- [ ] Commit ADR to GitHub repo

- [ ] Jim: extend judgment XML schema to allow multiple identifiers so that we can embed our identifiers as well as the official NCN. Probably involves putting the `<uk:xxx>` tags into a container tag which can be repeated, but Jim is the expert here.

- [ ] Devs: Generate sqid from content hash, and check for duplication, during ingestion, and thence generate a pseudoNCN for every incoming document.

- [ ] Devs: Store documents which don’t have an NCN using our pseudoNCN as the primary identifier.

- [ ] Dev / Design / User Research: Create a workflow in the editorial UI which allows editors to change or add new identifiers (i.e. issue a correct NCN, update an old one, etc). This will probably involve being able to split versions into separate documents, and combine documents into an existing one as a new version.
